const data = [
    {
        title: 'Отзывы партнеров1',
        backgroundUrl: 'https://s3-alpha-sig.figma.com/img/e620/2082/a12506c401fb6917285c6fde44fd3407?Expires=1583107200&Signature=Usliq-1Q4lay7Zbps3VZR-emJrACy2r5Dc3NDuY6lrBAlrUfSXhSnL-x9D0SYLawM8vQ40YlUxakEF1JH3VcfzsGTiJJq7T6VCddgpgCY-3PhxmodoYRhUSXShB-8swXAKUlRRmeVsUsJcuDXRf0bTNfmbUnAGX8FB7ChSpXG2WtoeEVHxtstDnQWv2I1S8OI9H5bwLh-Krfl2Lj5I~4tGXmGQ6Y~CCJBvVOUaCmNcusdkMqRImzMakiM1BIbElRADO2mZ-bRF-BvyNqckdbpuz542VFOLYRR5TTBGImqFtdjFZGd6NqP2eQ7WFi6AI3SbOejg-tB54A8i5ZQCVbsw__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA',
        avatarUrl: 'https://s3-alpha-sig.figma.com/img/6a53/96b3/7372ae9f49a3a3c1f2e83f75d6b40172?Expires=1583107200&Signature=YyVUhGA~JwuT8JNMvwGWMvYF2VkCijEzYXYkl~msZWkOAs4j4SQ2784Ibs6PQ6L8CYkmkRJ7hbDJE2~1SuOm2dxrFVJLN7ckvvJP61GGgPRvz-lnkwT9PkB1XSj389h1yZ~TEuZvTY-AxK8XUyUcZpRR445hs7ZacwLKwno2Ao-iqU2mpi7gzJkZnhVOhBG9alOzXYCiveDYy2LGA1ZN8Nxl6MVsH4SBEthNdMP7aH0HpjoRIca4Yx56uAiK0sJxM5V9Jw1cZ2Yb4hpeqoja67GKfuWwDX1yndWsgJy5ZyHlqiAhuaRQ~LRT8SWtWn2tsGyzJNLve~XT~lhPMy4HeQ__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA',
        avatarHeader: 'Анна Петровна',
        avatarParagraph: 'Ген. директор всего',
        paragraph: 'Разнообразный и богатый опыт сложившаяся структура организации требуют определения и уточнения направлений прогрессивного развития. Разнообразный и богатый опыт сложившаяся структура организации требуют определения и уточнения направлений прогрессивного развития.'
    },
    {
        title: 'Отзывы партнеров2',
        backgroundUrl: 'https://s3-alpha-sig.figma.com/img/e620/2082/a12506c401fb6917285c6fde44fd3407?Expires=1583107200&Signature=Usliq-1Q4lay7Zbps3VZR-emJrACy2r5Dc3NDuY6lrBAlrUfSXhSnL-x9D0SYLawM8vQ40YlUxakEF1JH3VcfzsGTiJJq7T6VCddgpgCY-3PhxmodoYRhUSXShB-8swXAKUlRRmeVsUsJcuDXRf0bTNfmbUnAGX8FB7ChSpXG2WtoeEVHxtstDnQWv2I1S8OI9H5bwLh-Krfl2Lj5I~4tGXmGQ6Y~CCJBvVOUaCmNcusdkMqRImzMakiM1BIbElRADO2mZ-bRF-BvyNqckdbpuz542VFOLYRR5TTBGImqFtdjFZGd6NqP2eQ7WFi6AI3SbOejg-tB54A8i5ZQCVbsw__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA',
        avatarUrl: 'https://s3-alpha-sig.figma.com/img/6a53/96b3/7372ae9f49a3a3c1f2e83f75d6b40172?Expires=1583107200&Signature=YyVUhGA~JwuT8JNMvwGWMvYF2VkCijEzYXYkl~msZWkOAs4j4SQ2784Ibs6PQ6L8CYkmkRJ7hbDJE2~1SuOm2dxrFVJLN7ckvvJP61GGgPRvz-lnkwT9PkB1XSj389h1yZ~TEuZvTY-AxK8XUyUcZpRR445hs7ZacwLKwno2Ao-iqU2mpi7gzJkZnhVOhBG9alOzXYCiveDYy2LGA1ZN8Nxl6MVsH4SBEthNdMP7aH0HpjoRIca4Yx56uAiK0sJxM5V9Jw1cZ2Yb4hpeqoja67GKfuWwDX1yndWsgJy5ZyHlqiAhuaRQ~LRT8SWtWn2tsGyzJNLve~XT~lhPMy4HeQ__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA',
        avatarHeader: 'Анна Петровна',
        avatarParagraph: 'Ген. директор всего',
        paragraph: 'Разнообразный и богатый опыт сложившаяся структура организации требуют определения и уточнения направлений прогрессивного развития. Разнообразный и богатый опыт сложившаяся структура организации требуют определения и уточнения направлений прогрессивного развития.'
    },
    {
        title: 'Отзывы партнеров3',
        backgroundUrl: 'https://s3-alpha-sig.figma.com/img/e620/2082/a12506c401fb6917285c6fde44fd3407?Expires=1583107200&Signature=Usliq-1Q4lay7Zbps3VZR-emJrACy2r5Dc3NDuY6lrBAlrUfSXhSnL-x9D0SYLawM8vQ40YlUxakEF1JH3VcfzsGTiJJq7T6VCddgpgCY-3PhxmodoYRhUSXShB-8swXAKUlRRmeVsUsJcuDXRf0bTNfmbUnAGX8FB7ChSpXG2WtoeEVHxtstDnQWv2I1S8OI9H5bwLh-Krfl2Lj5I~4tGXmGQ6Y~CCJBvVOUaCmNcusdkMqRImzMakiM1BIbElRADO2mZ-bRF-BvyNqckdbpuz542VFOLYRR5TTBGImqFtdjFZGd6NqP2eQ7WFi6AI3SbOejg-tB54A8i5ZQCVbsw__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA',
        avatarUrl: 'https://s3-alpha-sig.figma.com/img/6a53/96b3/7372ae9f49a3a3c1f2e83f75d6b40172?Expires=1583107200&Signature=YyVUhGA~JwuT8JNMvwGWMvYF2VkCijEzYXYkl~msZWkOAs4j4SQ2784Ibs6PQ6L8CYkmkRJ7hbDJE2~1SuOm2dxrFVJLN7ckvvJP61GGgPRvz-lnkwT9PkB1XSj389h1yZ~TEuZvTY-AxK8XUyUcZpRR445hs7ZacwLKwno2Ao-iqU2mpi7gzJkZnhVOhBG9alOzXYCiveDYy2LGA1ZN8Nxl6MVsH4SBEthNdMP7aH0HpjoRIca4Yx56uAiK0sJxM5V9Jw1cZ2Yb4hpeqoja67GKfuWwDX1yndWsgJy5ZyHlqiAhuaRQ~LRT8SWtWn2tsGyzJNLve~XT~lhPMy4HeQ__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA',
        avatarHeader: 'Анна Петровна',
        avatarParagraph: 'Ген. директор всего',
        paragraph: 'Разнообразный и богатый опыт сложившаяся структура организации требуют определения и уточнения направлений прогрессивного развития. Разнообразный и богатый опыт сложившаяся структура организации требуют определения и уточнения направлений прогрессивного развития.'
    },
    {
        title: 'Отзывы партнеров4',
        backgroundUrl: 'https://s3-alpha-sig.figma.com/img/e620/2082/a12506c401fb6917285c6fde44fd3407?Expires=1583107200&Signature=Usliq-1Q4lay7Zbps3VZR-emJrACy2r5Dc3NDuY6lrBAlrUfSXhSnL-x9D0SYLawM8vQ40YlUxakEF1JH3VcfzsGTiJJq7T6VCddgpgCY-3PhxmodoYRhUSXShB-8swXAKUlRRmeVsUsJcuDXRf0bTNfmbUnAGX8FB7ChSpXG2WtoeEVHxtstDnQWv2I1S8OI9H5bwLh-Krfl2Lj5I~4tGXmGQ6Y~CCJBvVOUaCmNcusdkMqRImzMakiM1BIbElRADO2mZ-bRF-BvyNqckdbpuz542VFOLYRR5TTBGImqFtdjFZGd6NqP2eQ7WFi6AI3SbOejg-tB54A8i5ZQCVbsw__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA',
        avatarUrl: 'https://s3-alpha-sig.figma.com/img/6a53/96b3/7372ae9f49a3a3c1f2e83f75d6b40172?Expires=1583107200&Signature=YyVUhGA~JwuT8JNMvwGWMvYF2VkCijEzYXYkl~msZWkOAs4j4SQ2784Ibs6PQ6L8CYkmkRJ7hbDJE2~1SuOm2dxrFVJLN7ckvvJP61GGgPRvz-lnkwT9PkB1XSj389h1yZ~TEuZvTY-AxK8XUyUcZpRR445hs7ZacwLKwno2Ao-iqU2mpi7gzJkZnhVOhBG9alOzXYCiveDYy2LGA1ZN8Nxl6MVsH4SBEthNdMP7aH0HpjoRIca4Yx56uAiK0sJxM5V9Jw1cZ2Yb4hpeqoja67GKfuWwDX1yndWsgJy5ZyHlqiAhuaRQ~LRT8SWtWn2tsGyzJNLve~XT~lhPMy4HeQ__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA',
        avatarHeader: 'Анна Петровна',
        avatarParagraph: 'Ген. директор всего',
        paragraph: 'Разнообразный и богатый опыт сложившаяся структура организации требуют определения и уточнения направлений прогрессивного развития. Разнообразный и богатый опыт сложившаяся структура организации требуют определения и уточнения направлений прогрессивного развития.'
    }
];

const rootElem = document.getElementById('root');
const viewContainer = document.createElement('div');
viewContainer.classList.add('viewContainer');

const cardContainer = document.createElement('div');
cardContainer.classList.add('cardContainer');
cardContainer.style.left = 0;
viewContainer.append(cardContainer);
rootElem.append(viewContainer);

const triggerLeft = document.createElement('button');
const triggerRight = document.createElement('button');
triggerLeft.innerText = '<';
triggerRight.innerText = '>';

triggerLeft.classList.add('triggerLeft');
triggerRight.classList.add('triggerRight');

viewContainer.append(triggerLeft);
viewContainer.append(triggerRight);

data.forEach((elem, i) => {
    const cardBackground = document.createElement('div');
    cardBackground.classList.add(`card${i}`);
    cardBackground.style.background = `url(${elem.backgroundUrl}) no-repeat top`;

    const cardElem = document.createElement('div');
    cardElem.classList.add('cardElem');

    const header = document.createElement('h1');
    header.classList.add('header');
    header.innerText = elem.title;

    const centerBlock = document.createElement('div');
    centerBlock.classList.add('centerBlock');

    const avatar = document.createElement('div');
    avatar.classList.add('avatar');
    const avatarImg = document.createElement('img');
    avatarImg.setAttribute('src', elem.avatarUrl);
    avatarImg.classList.add('avatarImg');
    const avatarHeader = document.createElement('h3');
    avatarHeader.innerText = elem.avatarHeader;
    avatarHeader.classList.add('avatarHeader');
    const avatarParagraph = document.createElement('p');
    avatarParagraph.classList.add('avatarParagraph');
    avatarParagraph.innerText = elem.avatarParagraph;
    avatar.append(avatarImg);
    avatar.append(avatarHeader);
    avatar.append(avatarParagraph);

    const paragraph = document.createElement('p');
    paragraph.classList.add('paragraph');
    paragraph.innerText = elem.paragraph;

    centerBlock.append(avatar);
    centerBlock.append(paragraph);

    cardElem.append(header);
    cardElem.append(centerBlock);

    const modal = document.createElement('div');
    modal.innerHTML = cardElem.innerHTML;
    modal.classList.add('modal', 'none');
    viewContainer.append(modal);
    cardElem.addEventListener('click', () => modal.classList.toggle('none'));

    cardBackground.append(cardElem);
    cardContainer.append(cardBackground);
});

let pageIndex = 0;

const cardMove = (id) => {
    pageIndex = id;
    const currentDot = document.querySelector('.active');
    currentDot.classList.remove('active');
    const nextDot = document.querySelectorAll('.dots')[pageIndex];
    nextDot.classList.add('active');
    cardContainer.style.left = -pageIndex * viewContainer.offsetWidth + 'px';
}

for (let i = 0; i < data.length; i++) {
    const dot = document.createElement('button');
    dot.classList.add('dots');
    dot.setAttribute('id', `dot${i}`);
    viewContainer.append(dot);
    dot.addEventListener('click', () => cardMove(dot.getAttribute('id').slice(3)));
}

const cardSize = {};
cardSize.width = viewContainer.offsetWidth;
cardSize.height = viewContainer.offsetHeight;

const goLeft = () => {
    pageIndex++;
    if (cardSize.width * pageIndex === cardSize.width * data.length) {
        cardContainer.style.left = 0;
        pageIndex = 0;
    }
    cardMove(pageIndex);
}

const goRight = () => {
    pageIndex--;
    if (cardSize.width * pageIndex < 0) {
        cardContainer.style.left = -cardSize.width * data.length;
        pageIndex = data.length - 1;
    }
    cardMove(pageIndex)
}

triggerLeft.addEventListener('click', goRight);
triggerRight.addEventListener('click', goLeft);

const resize = () => {
    const cards = document.querySelectorAll('.cardContainer > div');
    cards.forEach((elem) => {
        elem.style.width = cardSize.width + 'px';
        elem.style.height = cardSize.height + 'px';
    });
    cardContainer.style.width = cardSize.width * data.length + 'px';
    cardContainer.style.left = -pageIndex * cardSize.width + 'px';
    const initialDot = document.getElementById(`dot${pageIndex}`);
    initialDot.classList.add('active');
}

resize();

window.addEventListener('resize', resize);

