{"version":3,"sources":["index.js"],"names":["maxId","page","cardsElems","document","querySelector","form","addEventListener","e","preventDefault","_e$target$elements","target","elements","firstname","lastname","email","avatar","console","log","firstnameValue","value","lastnameValue","emailValue","avatarValue","createNewUser","then","ok","id","card","createCardForUser","first_name","last_name","prepend","classList","contains","parrent","parentNode","deleteUser","remove","err","body","offsetHeight","window","scrollY","innerHeight","getDataUsers","user","createElem","cardInfo","cardEmail","cardFirstName","cardLastname","cardAvatar","deleteCard","loadImg","concat","appendChild","tag","clazz","text","elem","createElement","add","innerText","fetch","response","json","result","total_pages","users","data","i","length","method","headers","Content-Type","_ref","imgElem","link","alt","setAttribute"],"mappings":"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","file":"main.js","sourcesContent":["\"use strict\";\n\nvar page = 1;\nvar maxId;\nvar cardsElems = document.querySelector('.cards');\nvar form = document.querySelector('.form');\nform.addEventListener('submit', function (e) {\n  e.preventDefault();\n  var _e$target$elements = e.target.elements,\n      firstname = _e$target$elements.firstname,\n      lastname = _e$target$elements.lastname,\n      email = _e$target$elements.email,\n      avatar = _e$target$elements.avatar;\n  console.log(firstname);\n  var firstnameValue = firstname.value;\n  var lastnameValue = lastname.value;\n  var emailValue = email.value;\n  var avatarValue = avatar.value;\n  createNewUser({\n    firstnameValue: firstnameValue,\n    lastnameValue: lastnameValue,\n    emailValue: emailValue,\n    avatarValue: avatarValue\n  }).then(function (ok) {\n    if (ok) {\n      var id = maxId++;\n      var card = createCardForUser({\n        id: id,\n        first_name: firstnameValue,\n        last_name: lastnameValue,\n        email: emailValue,\n        avatar: avatarValue\n      });\n      cardsElems.prepend(card);\n    }\n  });\n});\ncardsElems.addEventListener('click', function (e) {\n  var target = e.target;\n\n  if (target.classList.contains('card__delete')) {\n    var parrent = target.parentNode;\n    var id = parrent.id;\n    deleteUser(id).then(function (ok) {\n      if (ok) {\n        parrent.remove();\n      }\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }\n});\ndocument.addEventListener('scroll', function () {\n  var distToBottom = document.body.offsetHeight - window.scrollY - window.innerHeight;\n\n  if (distToBottom < 100) {\n    getDataUsers(++page);\n  }\n});\n\nvar createCardForUser = function createCardForUser(user) {\n  var card = createElem('div', 'card');\n  card.id = user.id;\n  maxId = ++user.id;\n  var cardInfo = createElem('div', 'card__info');\n  var cardEmail = createElem('p', 'card__email', user.email);\n  var cardFirstName = createElem('p', 'card__firstname', user.first_name);\n  var cardLastname = createElem('p', 'card__lastname', user.last_name);\n  var cardAvatar = createElem('img', 'card__avata');\n  var deleteCard = createElem('div', 'card__delete', 'Удалить');\n  loadImg(cardAvatar, 'card__avatar', user.avatar, \"\".concat(user.first_name, \" \").concat(user.last_name));\n  card.appendChild(cardInfo);\n  card.appendChild(deleteCard);\n  cardInfo.appendChild(cardEmail);\n  cardInfo.appendChild(cardFirstName);\n  cardInfo.appendChild(cardLastname);\n  cardInfo.appendChild(cardAvatar);\n  return card;\n};\n\nvar createElem = function createElem(tag, clazz, text) {\n  var elem = document.createElement(tag);\n  elem.classList.add(clazz);\n\n  if (text) {\n    elem.innerText = text;\n  }\n\n  return elem;\n};\n\nvar getDataUsers = function getDataUsers(page) {\n  fetch(\"https://reqres.in/api/users?page=\".concat(page)).then(function (response) {\n    return response.json();\n  }).then(function (result) {\n    if (page <= result.total_pages) {\n      var users = result.data;\n\n      for (var i = 0; i < users.length; i++) {\n        cardsElems.appendChild(createCardForUser(users[i]));\n      }\n    }\n  })[\"catch\"](function (err) {\n    console.log(err);\n  });\n};\n\nvar deleteUser = function deleteUser(id) {\n  return fetch(\"https://reqres.in/api/users/\".concat(id), {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(function (response) {\n    return response.ok;\n  });\n};\n\nfunction createNewUser(_ref) {\n  var id = _ref.id,\n      first_name = _ref.first_name,\n      last_name = _ref.last_name,\n      email = _ref.email,\n      avatar = _ref.avatar;\n  return fetch(\"https://reqres.in/api/users\", {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    data: {\n      id: id,\n      first_name: first_name,\n      last_name: last_name,\n      email: email,\n      avatar: avatar\n    }\n  }).then(function (response) {\n    return response.ok;\n  });\n}\n\nvar loadImg = function loadImg(imgElem, clazz, link, alt) {\n  imgElem.setAttribute('src', link);\n  imgElem.setAttribute('alt', alt);\n  imgElem.classList.add(clazz);\n};\n\ngetDataUsers(page);"]}